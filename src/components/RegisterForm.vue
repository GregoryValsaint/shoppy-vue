<template>
    <div>
        <h1>Inscription</h1>
        <p>
            <label>Email</label>
            <input ref="myInput" type="text" v-model="currentUser.email">
        </p>
        <p>
            <label>Password</label>
            <input ref="myInput" type="text" v-model="currentUser.password">
        </p>
        <p>
            <input type="submit" @click="addUser">
        </p>
    </div>
</template>

<script>
    import Axios from "axios";

    export default {
        name: "RegisterForm",
        data() {
            return {
                currentUser: {
                    email: "",
                    password: "",
                }
            }
        },
        methods:
            {
                async addUser() {
                    await Axios.post(process.env.VUE_APP_API_URL+"/api/register",
                        this.currentUser
                    )
                    this.$refs.myInput.focus()
                    await this.$store.dispatch('logToken', this.currentUser)
                    await this.$router.push({
                        name: 'Home'
                    })
                }
                ,
            }
    }
</script>

<style scoped>

</style>